{"ast":null,"code":"// USER ACTIONS\nexport var fetchIsLoading = function fetchIsLoading(bool) {\n  return {\n    type: 'FETCH_IS_LOADING',\n    isLoading: bool\n  };\n};\nexport var fetchUserSuccess = function fetchUserSuccess(user) {\n  return {\n    type: 'FETCH_USER_SUCCESS',\n    user: user\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return {\n    type: 'LOGOUT_USER'\n  };\n};\nexport var storeToken = function storeToken(access_token) {\n  return {\n    type: 'STORE_TOKEN',\n    token: access_token\n  };\n};\nexport var storeSleepData = function storeSleepData(data) {\n  return {\n    type: 'STORE_SLEEP',\n    data: data\n  };\n}; // ADD GOAL\n\nexport var setGoals = function setGoals(goals) {\n  return {\n    type: 'SET_GOALS',\n    goals: goals\n  };\n};\nexport var setGoalDate = function setGoalDate(date) {\n  return {\n    type: 'SET_GOAL_DATE',\n    goalDate: date\n  };\n};\nexport var setBedtime = function setBedtime(time) {\n  return {\n    type: 'SET_BEDTIME',\n    bedtimeTarget: time\n  };\n};\nexport var setWakeupTime = function setWakeupTime(time) {\n  return {\n    type: 'SET_WAKEUP_TIME',\n    wakeupTarget: time\n  };\n};\nexport var setFitbitUser = function setFitbitUser(user) {\n  return {\n    type: 'SET_FITBIT_USER',\n    user: user\n  };\n}; // EDIT\n\nexport var editGoal = function editGoal(goal) {\n  return {\n    type: 'EDIT_GOAL',\n    goal: goal\n  };\n};\nexport var editGoalDate = function editGoalDate(date) {\n  return {\n    type: 'EDIT_GOAL_DATE',\n    goalDate: date\n  };\n};\nexport var editBedtime = function editBedtime(time) {\n  return {\n    type: 'EDIT_BEDTIME',\n    bedtimeTarget: time\n  };\n};\nexport var editWakeupTime = function editWakeupTime(time) {\n  return {\n    type: 'EDIT_WAKEUP_TIME',\n    wakeupTarget: time\n  };\n}; // DELETE\n\nexport var deleteGoal = function deleteGoal(goalId) {\n  return {\n    type: 'DELETE_GOAL',\n    id: goalId\n  };\n}; // HEART RATE\n\nexport var getHeartRate = function getHeartRate(heartRate) {\n  return {\n    type: 'GET_HEART_RATE',\n    heartRate: heartRate\n  };\n}; // STORE DATE INPUT\n\nexport var storeDate = function storeDate(date) {\n  return {\n    type: 'STORE_DATE',\n    date: date\n  };\n}; // <--- redux thunk here --->\n// FETCH GET\n\nexport var fetchUser = function fetchUser(url, token) {\n  return function (dispatch) {\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      dispatch(fetchUserSuccess(user));\n    }).catch(console.error);\n  };\n}; // below not needed??\n\nexport var fetchUserData = function fetchUserData(url, date, token) {\n  return function (dispatch) {\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      return dispatch(fetchUserSuccess(user));\n    }).then(function (data) {\n      fetchSleepData(date, token)(dispatch);\n    }).catch(console.error);\n  };\n};\nexport var fetchSleepData = function fetchSleepData(date, token) {\n  return function (dispatch) {\n    fetch(\"https://api.fitbit.com/1.2/user/-/sleep/date/\".concat(date, \".json\"), {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(storeSleepData(data));\n    }).catch(console.error);\n  };\n}; // fitbit logout\n\nexport var logoutFitbit = function logoutFitbit(base64) {\n  // debugger\n  return function (dispatch) {\n    fetch('https://api.fitbit.com/oauth2/revoke', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Basic ' + base64\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      // debugger\n      dispatch(logoutUser());\n    }).catch(console.error);\n  };\n};\nexport var fetchHeartRate = function fetchHeartRate(date, token) {\n  return function (dispatch) {\n    fetch(\"https://api.fitbit.com/1/user/-/activities/heart/date/\".concat(date, \"/1d.json\"), {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(getHeartRate(data));\n    }).catch(console.error);\n  };\n};\nexport var fetchBackendUserData = function fetchBackendUserData(token, fitBitUser) {\n  return function (dispatch) {\n    fetch('http://localhost:3000/api/v1/users', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      data.forEach(function (user) {\n        if (fitBitUser.encodedId === user.encodedId) {\n          dispatch(setFitbitUser(user));\n        }\n      });\n    }).catch(console.error);\n  };\n};\nexport var fetchGoalData = function fetchGoalData(token) {\n  return function (dispatch) {\n    fetch('http://localhost:3000/api/v1/goals', {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(setGoals(data));\n    }).catch(console.error);\n  };\n}; // FETCH POST\n\nexport var fetchSleepGoals = function fetchSleepGoals(goalDate, bedtimeTarget, wakeupTarget, fitBitUser, token) {\n  return function (dispatch) {\n    fetch('http://localhost:3000/api/v1/goals', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        goalDate: goalDate,\n        bedtimeTarget: bedtimeTarget,\n        wakeupTarget: wakeupTarget,\n        user_id: fitBitUser.id\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      // dispatch(setGoals(data))\n      dispatch(setGoalDate(data.goalDate));\n      dispatch(setBedtime(data.bedtimeTarget));\n      dispatch(setWakeupTime(data.wakeupTarget));\n    }).catch(console.error);\n  };\n}; // FETCH PATCH\n\nexport var fetchEditedGoal = function fetchEditedGoal(goalId, goalDate, bedtimeTarget, wakeupTarget, token) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/goals/\".concat(goalId), {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        goalDate: goalDate,\n        bedtimeTarget: bedtimeTarget,\n        wakeupTarget: wakeupTarget\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      console.log(data);\n      dispatch(editGoal(data)); // dispatch(editGoalDate(data.goalDate))\n      // dispatch(editBedtime(data.bedtimeTarget))\n      // dispatch(editWakeupTime(data.wakeupTarget))\n    }).catch(console.error);\n  };\n}; // FETCH DELETE\n\nexport var fetchDeleteGoal = function fetchDeleteGoal(goalId, token) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/goals/\".concat(goalId), {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        id: goalId\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(deleteGoal(data.id));\n    }).catch(console.error);\n  };\n};","map":{"version":3,"sources":["/Users/dianayoo/Documents/FlatironSchool/JS/Mod-5-Final-Project/sleepmode-frontend/src/store/actionCreators/userActions.js"],"names":["fetchIsLoading","bool","type","isLoading","fetchUserSuccess","user","logoutUser","storeToken","access_token","token","storeSleepData","data","setGoals","goals","setGoalDate","date","goalDate","setBedtime","time","bedtimeTarget","setWakeupTime","wakeupTarget","setFitbitUser","editGoal","goal","editGoalDate","editBedtime","editWakeupTime","deleteGoal","goalId","id","getHeartRate","heartRate","storeDate","fetchUser","url","dispatch","fetch","method","headers","then","res","json","catch","console","error","fetchUserData","fetchSleepData","logoutFitbit","base64","fetchHeartRate","fetchBackendUserData","fitBitUser","forEach","encodedId","fetchGoalData","fetchSleepGoals","body","JSON","stringify","user_id","fetchEditedGoal","log","fetchDeleteGoal"],"mappings":"AAAA;AAEA,OAAO,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD,EAAU;AACtC,SAAO;AACLC,IAAAA,IAAI,EAAE,kBADD;AAELC,IAAAA,SAAS,EAAEF;AAFN,GAAP;AAID,CALM;AAOP,OAAO,IAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,IAAD,EAAU;AACxC,SAAO;AACLH,IAAAA,IAAI,EAAE,oBADD;AAELG,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAC9B,SAAO;AACLJ,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,IAAMK,UAAU,GAAG,SAAbA,UAAa,CAACC,YAAD,EAAkB;AAC1C,SAAO;AACLN,IAAAA,IAAI,EAAE,aADD;AAELO,IAAAA,KAAK,EAAED;AAFF,GAAP;AAID,CALM;AAOP,OAAO,IAAME,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD,EAAU;AACtC,SAAO;AACLT,IAAAA,IAAI,EAAE,aADD;AAELS,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AACjC,SAAO;AACLX,IAAAA,IAAI,EAAE,WADD;AAELW,IAAAA,KAAK,EAAEA;AAFF,GAAP;AAID,CALM;AAOP,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD,EAAU;AACnC,SAAO;AACLb,IAAAA,IAAI,EAAE,eADD;AAELc,IAAAA,QAAQ,EAAED;AAFL,GAAP;AAID,CALM;AAOP,OAAO,IAAME,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD,EAAU;AAClC,SAAO;AACLhB,IAAAA,IAAI,EAAE,aADD;AAELiB,IAAAA,aAAa,EAAED;AAFV,GAAP;AAID,CALM;AAOP,OAAO,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAACF,IAAD,EAAU;AACrC,SAAO;AACLhB,IAAAA,IAAI,EAAE,iBADD;AAELmB,IAAAA,YAAY,EAAEH;AAFT,GAAP;AAID,CALM;AAOP,OAAO,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAACjB,IAAD,EAAU;AACrC,SAAO;AACLH,IAAAA,IAAI,EAAE,iBADD;AAELG,IAAAA,IAAI,EAAEA;AAFD,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,IAAMkB,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAU;AAChC,SAAO;AACLtB,IAAAA,IAAI,EAAE,WADD;AAELsB,IAAAA,IAAI,EAAEA;AAFD,GAAP;AAID,CALM;AAOP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACV,IAAD,EAAU;AACpC,SAAO;AACLb,IAAAA,IAAI,EAAE,gBADD;AAELc,IAAAA,QAAQ,EAAED;AAFL,GAAP;AAID,CALM;AAOP,OAAO,IAAMW,WAAW,GAAG,SAAdA,WAAc,CAACR,IAAD,EAAU;AACnC,SAAO;AACLhB,IAAAA,IAAI,EAAE,cADD;AAELiB,IAAAA,aAAa,EAAED;AAFV,GAAP;AAID,CALM;AAOP,OAAO,IAAMS,cAAc,GAAG,SAAjBA,cAAiB,CAACT,IAAD,EAAU;AACtC,SAAO;AACLhB,IAAAA,IAAI,EAAE,kBADD;AAELmB,IAAAA,YAAY,EAAEH;AAFT,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,IAAMU,UAAU,GAAG,SAAbA,UAAa,CAACC,MAAD,EAAY;AACpC,SAAO;AACL3B,IAAAA,IAAI,EAAE,aADD;AAEL4B,IAAAA,EAAE,EAAED;AAFC,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACC,SAAD,EAAe;AACzC,SAAO;AACL9B,IAAAA,IAAI,EAAE,gBADD;AAEL8B,IAAAA,SAAS,EAAEA;AAFN,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAClB,IAAD,EAAU;AACjC,SAAO;AACLb,IAAAA,IAAI,EAAE,YADD;AAELa,IAAAA,IAAI,EAAEA;AAFD,GAAP;AAID,CALM,C,CAOP;AAEA;;AACA,OAAO,IAAMmB,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAM1B,KAAN,EAAgB;AACrC,SAAO,UAAC2B,QAAD,EAAc;AACrBC,IAAAA,KAAK,CAACF,GAAD,EAAM;AACTG,MAAAA,MAAM,EAAE,KADC;AAETC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB;AAFA,KAAN,CAAL,CAOG+B,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAAnC,IAAI,EAAI;AACZ+B,MAAAA,QAAQ,CAAChC,gBAAgB,CAACC,IAAD,CAAjB,CAAR;AACD,KAVH,EAWGsC,KAXH,CAWSC,OAAO,CAACC,KAXjB;AAYD,GAbC;AAcH,CAfM,C,CAiBP;;AACA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACX,GAAD,EAAMpB,IAAN,EAAYN,KAAZ,EAAsB;AAC/C,SAAO,UAAC2B,QAAD,EAAc;AACnBC,IAAAA,KAAK,CAACF,GAAD,EAAM;AACTG,MAAAA,MAAM,EAAE,KADC;AAETC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB;AAFA,KAAN,CAAL,CAOG+B,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAAnC,IAAI;AAAA,aAAI+B,QAAQ,CAAChC,gBAAgB,CAACC,IAAD,CAAjB,CAAZ;AAAA,KARZ,EASGmC,IATH,CASQ,UAAA7B,IAAI,EAAI;AACZoC,MAAAA,cAAc,CAAChC,IAAD,EAAON,KAAP,CAAd,CAA4B2B,QAA5B;AACD,KAXH,EAYGO,KAZH,CAYSC,OAAO,CAACC,KAZjB;AAaD,GAdD;AAeH,CAhBM;AAkBP,OAAO,IAAME,cAAc,GAAG,SAAjBA,cAAiB,CAAChC,IAAD,EAAON,KAAP,EAAiB;AAC3C,SAAO,UAAC2B,QAAD,EAAc;AACrBC,IAAAA,KAAK,wDAAiDtB,IAAjD,YAA8D;AACjEuB,MAAAA,MAAM,EAAE,KADyD;AAEjEC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB;AAFwD,KAA9D,CAAL,CAOG+B,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAA7B,IAAI,EAAI;AACZyB,MAAAA,QAAQ,CAAC1B,cAAc,CAACC,IAAD,CAAf,CAAR;AAA+B,KATnC,EAUGgC,KAVH,CAUSC,OAAO,CAACC,KAVjB;AAWD,GAZC;AAaH,CAdM,C,CAgBP;;AACA,OAAO,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAAY;AACtC;AACE,SAAO,UAACb,QAAD,EAAc;AACrBC,IAAAA,KAAK,CAAC,sCAAD,EAAyC;AAC5CC,MAAAA,MAAM,EAAE,MADoC;AAE5CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,WAAWU;AAFrB;AAFmC,KAAzC,CAAL,CAOGT,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAAnC,IAAI,EAAI;AACZ;AACA+B,MAAAA,QAAQ,CAAC9B,UAAU,EAAX,CAAR;AACD,KAXH,EAYGqC,KAZH,CAYSC,OAAO,CAACC,KAZjB;AAaD,GAdC;AAeH,CAjBM;AAmBP,OAAO,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,CAACnC,IAAD,EAAON,KAAP,EAAiB;AAC3C,SAAO,UAAC2B,QAAD,EAAc;AACnBC,IAAAA,KAAK,iEAA0DtB,IAA1D,eAA0E;AAC7EuB,MAAAA,MAAM,EAAE,KADqE;AAE7EC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB;AAFoE,KAA1E,CAAL,CAOG+B,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAA7B,IAAI,EAAI;AACZyB,MAAAA,QAAQ,CAACL,YAAY,CAACpB,IAAD,CAAb,CAAR;AAA6B,KATjC,EAUGgC,KAVH,CAUSC,OAAO,CAACC,KAVjB;AAWD,GAZD;AAaH,CAdM;AAgBP,OAAO,IAAMM,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC1C,KAAD,EAAQ2C,UAAR,EAAuB;AACvD,SAAO,UAAChB,QAAD,EAAc;AACnBC,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,MAAAA,MAAM,EAAE,KADkC;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB;AAFiC,KAAvC,CAAL,CAOG+B,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAA7B,IAAI,EAAI;AACZA,MAAAA,IAAI,CAAC0C,OAAL,CAAa,UAAAhD,IAAI,EAAI;AACnB,YAAI+C,UAAU,CAACE,SAAX,KAAyBjD,IAAI,CAACiD,SAAlC,EAA6C;AAC3ClB,UAAAA,QAAQ,CAACd,aAAa,CAACjB,IAAD,CAAd,CAAR;AACD;AACF,OAJD;AAKD,KAdH,EAeGsC,KAfH,CAeSC,OAAO,CAACC,KAfjB;AAgBD,GAjBD;AAkBH,CAnBM;AAqBP,OAAO,IAAMU,aAAa,GAAG,SAAhBA,aAAgB,CAAC9C,KAAD,EAAW;AACpC,SAAO,UAAC2B,QAAD,EAAc;AACnBC,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,MAAAA,MAAM,EAAE,KADkC;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB;AAFiC,KAAvC,CAAL,CAOG+B,IAPH,CAOQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPX,EAQGF,IARH,CAQQ,UAAA7B,IAAI,EAAI;AACZyB,MAAAA,QAAQ,CAACxB,QAAQ,CAACD,IAAD,CAAT,CAAR;AACD,KAVH,EAWGgC,KAXH,CAWSC,OAAO,CAACC,KAXjB;AAYD,GAbD;AAcH,CAfM,C,CAiBP;;AACA,OAAO,IAAMW,eAAe,GAAG,SAAlBA,eAAkB,CAACxC,QAAD,EAAWG,aAAX,EAA0BE,YAA1B,EAAwC+B,UAAxC,EAAoD3C,KAApD,EAA8D;AACzF,SAAO,UAAC2B,QAAD,EAAc;AACnBC,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,MAAAA,MAAM,EAAE,MADkC;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB,OAFiC;AAM1CgD,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB3C,QAAAA,QAAQ,EAAEA,QADS;AAEnBG,QAAAA,aAAa,EAAEA,aAFI;AAGnBE,QAAAA,YAAY,EAAEA,YAHK;AAInBuC,QAAAA,OAAO,EAAER,UAAU,CAACtB;AAJD,OAAf;AANoC,KAAvC,CAAL,CAaGU,IAbH,CAaQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAbX,EAcGF,IAdH,CAcQ,UAAA7B,IAAI,EAAI;AACZ;AACAyB,MAAAA,QAAQ,CAACtB,WAAW,CAACH,IAAI,CAACK,QAAN,CAAZ,CAAR;AACAoB,MAAAA,QAAQ,CAACnB,UAAU,CAACN,IAAI,CAACQ,aAAN,CAAX,CAAR;AACAiB,MAAAA,QAAQ,CAAChB,aAAa,CAACT,IAAI,CAACU,YAAN,CAAd,CAAR;AACD,KAnBH,EAoBGsB,KApBH,CAoBSC,OAAO,CAACC,KApBjB;AAqBD,GAtBD;AAuBH,CAxBM,C,CA0BP;;AACA,OAAO,IAAMgB,eAAe,GAAG,SAAlBA,eAAkB,CAAChC,MAAD,EAASb,QAAT,EAAmBG,aAAnB,EAAkCE,YAAlC,EAAgDZ,KAAhD,EAA0D;AACrF,SAAO,UAAC2B,QAAD,EAAc;AACnBC,IAAAA,KAAK,8CAAuCR,MAAvC,GAAiD;AACpDS,MAAAA,MAAM,EAAE,OAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB,OAF2C;AAMpDgD,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB3C,QAAAA,QAAQ,EAAEA,QADS;AAEnBG,QAAAA,aAAa,EAAEA,aAFI;AAGnBE,QAAAA,YAAY,EAAEA;AAHK,OAAf;AAN8C,KAAjD,CAAL,CAYGmB,IAZH,CAYQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAZX,EAaGF,IAbH,CAaQ,UAAA7B,IAAI,EAAI;AACZiC,MAAAA,OAAO,CAACkB,GAAR,CAAYnD,IAAZ;AACAyB,MAAAA,QAAQ,CAACb,QAAQ,CAACZ,IAAD,CAAT,CAAR,CAFY,CAGZ;AACA;AACA;AACD,KAnBH,EAoBGgC,KApBH,CAoBSC,OAAO,CAACC,KApBjB;AAqBD,GAtBD;AAuBH,CAxBM,C,CA0BP;;AACA,OAAO,IAAMkB,eAAe,GAAG,SAAlBA,eAAkB,CAAClC,MAAD,EAASpB,KAAT,EAAmB;AAC9C,SAAO,UAAC2B,QAAD,EAAc;AACnBC,IAAAA,KAAK,8CAAuCR,MAAvC,GAAiD;AACpDS,MAAAA,MAAM,EAAE,QAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAY9B;AAFtB,OAF2C;AAMpDgD,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB7B,QAAAA,EAAE,EAAED;AADe,OAAf;AAN8C,KAAjD,CAAL,CAUGW,IAVH,CAUQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAVX,EAWGF,IAXH,CAWQ,UAAA7B,IAAI,EAAI;AACZyB,MAAAA,QAAQ,CAACR,UAAU,CAACjB,IAAI,CAACmB,EAAN,CAAX,CAAR;AACD,KAbH,EAcGa,KAdH,CAcSC,OAAO,CAACC,KAdjB;AAeD,GAhBD;AAiBH,CAlBM","sourcesContent":["// USER ACTIONS\n\nexport const fetchIsLoading = (bool) => {\n  return {\n    type: 'FETCH_IS_LOADING',\n    isLoading: bool\n  }\n}\n\nexport const fetchUserSuccess = (user) => {\n  return {\n    type: 'FETCH_USER_SUCCESS',\n    user\n  }\n}\n\nexport const logoutUser = () => {\n  return {\n    type: 'LOGOUT_USER'\n  }\n}\n\nexport const storeToken = (access_token) => {\n  return {\n    type: 'STORE_TOKEN',\n    token: access_token\n  }\n}\n\nexport const storeSleepData = (data) => {\n  return {\n    type: 'STORE_SLEEP',\n    data\n  }\n}\n\n// ADD GOAL\n\nexport const setGoals = (goals) => {\n  return {\n    type: 'SET_GOALS',\n    goals: goals\n  }\n}\n\nexport const setGoalDate = (date) => {\n  return {\n    type: 'SET_GOAL_DATE',\n    goalDate: date\n  }\n}\n\nexport const setBedtime = (time) => {\n  return {\n    type: 'SET_BEDTIME',\n    bedtimeTarget: time\n  }\n}\n\nexport const setWakeupTime = (time) => {\n  return {\n    type: 'SET_WAKEUP_TIME',\n    wakeupTarget: time\n  }\n}\n\nexport const setFitbitUser = (user) => {\n  return {\n    type: 'SET_FITBIT_USER',\n    user: user\n  }\n}\n\n// EDIT\n\nexport const editGoal = (goal) => {\n  return {\n    type: 'EDIT_GOAL',\n    goal: goal\n  }\n}\n\nexport const editGoalDate = (date) => {\n  return {\n    type: 'EDIT_GOAL_DATE',\n    goalDate: date\n  }\n}\n\nexport const editBedtime = (time) => {\n  return {\n    type: 'EDIT_BEDTIME',\n    bedtimeTarget: time\n  }\n}\n\nexport const editWakeupTime = (time) => {\n  return {\n    type: 'EDIT_WAKEUP_TIME',\n    wakeupTarget: time\n  }\n}\n\n// DELETE\n\nexport const deleteGoal = (goalId) => {\n  return {\n    type: 'DELETE_GOAL',\n    id: goalId\n  }\n}\n\n// HEART RATE\n\nexport const getHeartRate = (heartRate) => {\n  return {\n    type: 'GET_HEART_RATE',\n    heartRate: heartRate\n  }\n}\n\n// STORE DATE INPUT\n\nexport const storeDate = (date) => {\n  return {\n    type: 'STORE_DATE',\n    date: date\n  }\n}\n\n// <--- redux thunk here --->\n\n// FETCH GET\nexport const fetchUser = (url, token) => {\n    return (dispatch) => {\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    })\n      .then(res => res.json())\n      .then(user => {\n        dispatch(fetchUserSuccess(user))\n      })\n      .catch(console.error)\n  }\n}\n\n// below not needed??\nexport const fetchUserData = (url, date, token) => {\n    return (dispatch) => {\n      fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        }\n      })\n        .then(res => res.json())\n        .then(user => dispatch(fetchUserSuccess(user)))\n        .then(data => {\n          fetchSleepData(date, token)(dispatch)\n        })\n        .catch(console.error)\n    }\n}\n\nexport const fetchSleepData = (date, token) => {\n    return (dispatch) => {\n    fetch(`https://api.fitbit.com/1.2/user/-/sleep/date/${date}.json`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        dispatch(storeSleepData(data))})\n      .catch(console.error)\n  }\n}\n\n// fitbit logout\nexport const logoutFitbit = (base64) => {\n  // debugger\n    return (dispatch) => {\n    fetch('https://api.fitbit.com/oauth2/revoke', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Basic ' + base64\n      }\n    })\n      .then(res => res.json())\n      .then(user => {\n        // debugger\n        dispatch(logoutUser())\n      })\n      .catch(console.error)\n  }\n}\n\nexport const fetchHeartRate = (date, token) => {\n    return (dispatch) => {\n      fetch(`https://api.fitbit.com/1/user/-/activities/heart/date/${date}/1d.json`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          dispatch(getHeartRate(data))})\n        .catch(console.error)\n    }\n}\n\nexport const fetchBackendUserData = (token, fitBitUser) => {\n    return (dispatch) => {\n      fetch('http://localhost:3000/api/v1/users', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          data.forEach(user => {\n            if (fitBitUser.encodedId === user.encodedId) {\n              dispatch(setFitbitUser(user))\n            }\n          })\n        })\n        .catch(console.error)\n    }\n}\n\nexport const fetchGoalData = (token) => {\n    return (dispatch) => {\n      fetch('http://localhost:3000/api/v1/goals', {\n        method: \"GET\",\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          dispatch(setGoals(data))\n        })\n        .catch(console.error)\n    }\n}\n\n// FETCH POST\nexport const fetchSleepGoals = (goalDate, bedtimeTarget, wakeupTarget, fitBitUser, token) => {\n    return (dispatch) => {\n      fetch('http://localhost:3000/api/v1/goals', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        },\n        body: JSON.stringify({\n          goalDate: goalDate,\n          bedtimeTarget: bedtimeTarget,\n          wakeupTarget: wakeupTarget,\n          user_id: fitBitUser.id\n        })\n      })\n        .then(res => res.json())\n        .then(data => {\n          // dispatch(setGoals(data))\n          dispatch(setGoalDate(data.goalDate))\n          dispatch(setBedtime(data.bedtimeTarget))\n          dispatch(setWakeupTime(data.wakeupTarget))\n        })\n        .catch(console.error)\n    }\n}\n\n// FETCH PATCH\nexport const fetchEditedGoal = (goalId, goalDate, bedtimeTarget, wakeupTarget, token) => {\n    return (dispatch) => {\n      fetch(`http://localhost:3000/api/v1/goals/${goalId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        },\n        body: JSON.stringify({\n          goalDate: goalDate,\n          bedtimeTarget: bedtimeTarget,\n          wakeupTarget: wakeupTarget\n        })\n      })\n        .then(res => res.json())\n        .then(data => {\n          console.log(data)\n          dispatch(editGoal(data))\n          // dispatch(editGoalDate(data.goalDate))\n          // dispatch(editBedtime(data.bedtimeTarget))\n          // dispatch(editWakeupTime(data.wakeupTarget))\n        })\n        .catch(console.error)\n    }\n}\n\n// FETCH DELETE\nexport const fetchDeleteGoal = (goalId, token) => {\n    return (dispatch) => {\n      fetch(`http://localhost:3000/api/v1/goals/${goalId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        },\n        body: JSON.stringify({\n          id: goalId\n        })\n      })\n        .then(res => res.json())\n        .then(data => {\n          dispatch(deleteGoal(data.id))\n        })\n        .catch(console.error)\n    }\n}\n"]},"metadata":{},"sourceType":"module"}